/*! configurator 05-09-2014 */
!function(a){"use strict";function b(a,b,c){Error.apply(this,[c]),this.node=a,this.name="AssertError",this.assert=b,this.message="AssertError for "+a.getLongname()+": "+c}function c(a){this.args=Array.prototype.slice.call(arguments,0),this.test=function(c,d){if("string"==typeof d&&d.length<=a)throw new b(c,"GreaterThan","Expected value to contain "+a+" or more characters");if("number"==typeof d&&a>=d)throw new b(c,"GreaterThan","Expected value to be greater than "+a+" but is "+d);return!0}}function d(a){this.test=function(c,d){if("string"==typeof d&&d.length>=a)throw new b(c,"LessThan","Expected value to contain "+a+" or less characters");if("number"==typeof d&&d>=a)throw new b(c,"LessThan","Expected value to be less than "+a+" but is "+d);return!0}}function e(){this.test=function(a,c){if("string"!=typeof c)throw new b(a,"String","type mismatch expected `string` got `"+typeof c+"`");return!0}}function f(){this.test=function(a,c){if("number"!=typeof c)throw new b(a,"Number","type mismatch expected `number` got `"+typeof c+"`");return!0}}function g(){this.test=function(a,c){if("boolean"!=typeof c)throw new b(a,"Boolean","type mismatch expected `boolean` got `"+typeof c+"`");return!0}}function h(){this.test=function(a,c){var d=Object.prototype.toString.call(c);if("[object Object]"!==d)throw new b(a,"Object","type mismatch expected `[object Object]` got `"+d+"`");return!0}}function i(){this.test=function(a,c){var d=Object.prototype.toString.call(c);if("[object Array]"!==d)throw new b(a,"Array","type mismatch expected `[object Array]` got `"+d+"`");return!0}}function j(a,b,c){l.apply(this,[a,new i,b,c,!0])}function k(a,b,c){l.apply(this,[a,new g,b,c,!1])}function l(a,b,c,d,e){if(this.name=a,this.parent=d,this.isRequired=!1,this.childNodes={},this.nodeChildren,this.allowChildNodes=e||!1,this.asserts=b?[b]:[],this.defaultValue,this.value,!0===this.allowChildNodes&&c&&c.length>0)for(var f=0;f<c.length;f++)c[f].parent=this,this.childNodes[c[f].name]=c[f];d&&d.childNodes&&(d.childNodes[a]=this)}function m(a){this.objectNode=function(b){return new o(b,null,a)},this.arrayNode=function(b){return new j(b,null,a)},this.stringNode=function(b){return new p(b,null,a)},this.booleanNode=function(b){return new k(b,null,a)},this.numberNode=function(b){return new n(b,null,a)},this.end=function(){return a}}function n(a,b,e){l.apply(this,[a,new f,b,e,!1]),this.greaterThan=function(a){return this.asserts.push(new c(a)),this},this.lessThan=function(a){return this.asserts.push(new d(a)),this}}function o(a,b,c){l.apply(this,[a,new h,b,c,!0])}function p(a,b,f){l.apply(this,[a,new e,b,f,!1]),this.greaterThan=function(a){return this.asserts.push(new c(a)),this},this.lessThan=function(a){return this.asserts.push(new d(a)),this}}function q(a){return a&&"[object Array]"===Object.prototype.toString.call(a)?new o("root",a,null):new o("root",null,null)}b.prototype=Object.create(Error.prototype),j.prototype=Object.create(l.prototype),k.prototype=Object.create(l.prototype),l.prototype.get=function(){return this.value},l.prototype.set=function(a){return this.value=this.validate(a)},l.prototype.required=function(){return this.isRequired=!0,this},l.prototype.default=function(a){return this.defaultValue=a,this},l.prototype.getLongname=function(){for(var a=[this.name],b=this;b=b.parent;)"root"!==b.name&&a.push(b.name);return"root["+a.reverse().join("][")+"]"},l.prototype.validate=function(a){var b;if("undefined"==typeof a){if(!0===this.isRequired)throw new Error("Node `"+this.getLongname()+"` is required.");if(!this.defaultValue)return this.value;a=this.defaultValue}for(var c=0;c<this.asserts.length;c++)this.asserts[c].test(this,a);if(!0===this.allowChildNodes)if(this instanceof j)if(b=[],this.childNodes&&this.childNodes.all)for(var c=0;c<a.length;c++)b[c]=this.childNodes.all.set(a[c]);else for(var d in this.childNodes)b[d]=this.childNodes[d].set(a[d]);else{b={};for(var d in this.childNodes)b[d]=this.childNodes[d].set(a[d])}else b=a;return this.value=b},l.prototype.end=function(){return this.parent&&!0===this.parent.allowChildNodes&&this.parent.nodeChildren?this.parent.nodeChildren:this.parent||this},l.prototype.children=function(){if(!0===this.allowChildNodes)return this.nodeChildren||(this.nodeChildren=new m(this)),this.nodeChildren;throw new Error("Node "+this.name+" cannot carry any children, only `Object` and `Array` nodes do.")},n.prototype=Object.create(l.prototype),o.prototype=Object.create(l.prototype),p.prototype=Object.create(l.prototype),q.StringNode=p,q.NumberNode=n,q.BooleanNode=k,q.ArrayNode=j,q.ObjectNode=o,"function"==typeof define&&define.amd?define([],q):"object"==typeof exports?module.exports=q:a.configurator=q}(this);