/*! configurator 05-09-2014 */
!function(a,b){"use strict";function c(a,b,c){Error.apply(this,[c]),this.node=a,this.name="AssertError",this.assert=b,this.message=a.getLongname()+": "+c}function d(a){this.args=Array.prototype.slice.call(arguments,0),this.test=function(b,d){if("string"==typeof d&&d.length<=a)throw new c(b,"GreaterThanAssert","Expected value to contain "+a+" or more characters");if("number"==typeof d&&a>=d)throw new c(b,"GreaterThanAssert","Expected value to be greater than "+a+" but is "+d);return!0}}function e(a){this.test=function(b,d){if("string"==typeof d&&d.length>=a)throw new c(b,"LessThanAssert","Expected value to contain "+a+" or less characters");if("number"==typeof d&&d>=a)throw new c(b,"LessThanAssert","Expected value to be less than "+a+" but is "+d);return!0}}function f(a,b){var c=new RegExp(a),d=b||!1;this.test=function(a,b){if(c.test(b)!==d)throw new Error("Expected ")}}function g(){this.test=function(a,b){if("string"!=typeof b)throw new c(a,"String","type mismatch expected `string` got `"+typeof b+"`");return!0}}function h(){this.test=function(a,b){if("number"!=typeof b)throw new c(a,"Number","type mismatch expected `number` got `"+typeof b+"`");return!0}}function i(){this.test=function(a,b){if("boolean"!=typeof b)throw new c(a,"Boolean","type mismatch expected `boolean` got `"+typeof b+"`");return!0}}function j(){this.test=function(a,b){var d=Object.prototype.toString.call(b);if("[object Object]"!==d)throw new c(a,"Object","type mismatch expected `[object Object]` got `"+d+"`");return!0}}function k(){this.test=function(a,b){var d=Object.prototype.toString.call(b);if("[object Array]"!==d)throw new c(a,"Array","type mismatch expected `[object Array]` got `"+d+"`");return!0}}function l(a,c,d,e,f){if(this.name=a,this.parent=e,this.isRequired=!1,this.childNodes={},this.nodeChildren=null,this.allowChildNodes=f||!1,this.asserts=c?[c]:[],this.defaultValue=null,this.value=b,!0===this.allowChildNodes&&d&&d.length>0)for(var g=0;g<d.length;g++)d[g].parent=this,this.childNodes[d[g].name]=d[g];e&&e.childNodes&&(e.childNodes[a]=this)}function m(a,b,c){l.apply(this,[a,new k,b,c,!0])}function n(a,b,c){l.apply(this,[a,new i,b,c,!1])}function o(a,b,c){l.apply(this,[a,null,b,c,!0])}function p(a){this.objectNode=function(b){return new r(b,null,a)},this.arrayNode=function(b){return new m(b,null,a)},this.stringNode=function(b){return new s(b,null,a)},this.booleanNode=function(b){return new n(b,null,a)},this.numberNode=function(b){return new q(b,null,a)},this.mixedNode=function(b){return new o(b,null,a)},this.end=function(){return a}}function q(a,b,c){l.apply(this,[a,new h,b,c,!1]),this.greaterThan=function(a){return this.asserts.push(new d(a)),this},this.lessThan=function(a){return this.asserts.push(new e(a)),this}}function r(a,b,c){l.apply(this,[a,new j,b,c,!0])}function s(a,b,c){l.apply(this,[a,new g,b,c,!1]),this.greaterThan=function(a){return this.asserts.push(new d(a)),this},this.lessThan=function(a){return this.asserts.push(new e(a)),this}}function t(a){return a&&"[object Array]"===Object.prototype.toString.call(a)?new r("root",a,null):new r("root",null,null)}c.prototype=Object.create(Error.prototype),l.prototype.get=function(){return this.value},l.prototype.set=function(a){return this.validate(a),this.value},l.prototype.required=function(){return this.isRequired=!0,this},l.prototype.default=function(a){return this.defaultValue=a,this},l.prototype.regex=function(a,b){this.asserts.push(new f(a,b))},l.prototype.getLongname=function(){for(var a=[this.name],b=this;b=b.parent;)"root"!==b.name&&a.push(b.name);return"root["+a.reverse().join("][")+"]"},l.prototype.validate=function(a){var b,c,d;if("undefined"==typeof a){if(!0===this.isRequired)throw new Error("Node `"+this.getLongname()+"` is required.");if(!this.defaultValue)return this.value;a=this.defaultValue}for(d=0;d<this.asserts.length;d++)this.asserts[d].test(this,a);if(!0===this.allowChildNodes){if("[object Array]"===Object.prototype.toString.call(a))if(b=[],this.childNodes&&this.childNodes.all)for(d=0;d<a.length;d++)b[d]=this.childNodes.all.set(a[d]);else for(c in this.childNodes)b[c]=this.childNodes[c].set(a[c]);else if("[object Object]"===Object.prototype.toString.call(a))if(b={},this.childNodes&&this.childNodes.all)for(c in a)b[c]=this.childNodes.all.set(a[c]);else for(c in this.childNodes)b[c]=this.childNodes[c].set(a[c])}else b=a;return this.value=b,this.value},l.prototype.end=function(){return this.parent&&!0===this.parent.allowChildNodes&&this.parent.nodeChildren?this.parent.nodeChildren:this.parent||this},l.prototype.children=function(){if(!0===this.allowChildNodes)return this.nodeChildren||(this.nodeChildren=new p(this)),this.nodeChildren;throw new Error("Node "+this.name+" cannot carry any children, only `Object` and `Array` nodes do.")},m.prototype=Object.create(l.prototype),n.prototype=Object.create(l.prototype),o.prototype=Object.create(l.prototype),q.prototype=Object.create(l.prototype),r.prototype=Object.create(l.prototype),s.prototype=Object.create(l.prototype),t.StringNode=s,t.NumberNode=q,t.BooleanNode=n,t.ArrayNode=m,t.ObjectNode=r,t.MixedNode=o,"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t:a.configurator=t}(this);